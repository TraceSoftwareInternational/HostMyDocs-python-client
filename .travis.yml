sudo: required
language: python
python:
  - "3.5"
  - "3.5-dev"
  - "3.6"
  - "3.6-dev"
  - "3.7-dev"
  - "pypy3.5"


services:
  - docker

before_install:
  - wget https://github.com/jwilder/dockerize/releases/download/v0.6.1/dockerize-linux-amd64-v0.6.1.tar.gz
  - sudo tar -C /usr/local/bin -xzvf dockerize-linux-amd64-v0.6.1.tar.gz
  - sudo chmod +x /usr/local/bin/dockerize
  - docker pull tracesoftware/hostmydocs
  - docker run -d -e CREDENTIALS=user:password -e SHOULD_SECURE=FALSE -p 127.0.0.1:8080:80 tracesoftware/hostmydocs
  - dockerize -wait http://127.0.0.1:8080

install:
  - pip install -r requirements.txt

script:
  - python -m unittest discover -s tests
